<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://farhan-ra.github.io/Openpages-AI-Bootcamp/chapter3/2_set_up_and_integrate_ai/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Set-up and Integrate AI Model - OpenPages AI Bootcamp</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <link href="../../assets/css/custom.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">OpenPages AI Bootcamp</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Chapter 1</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../chapter1/" class="dropdown-item">Overview</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Chapter 2</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../chapter2/0_index/" class="dropdown-item">Overview</a>
</li>
                                    
<li>
    <a href="../../chapter2/1_wxai/" class="dropdown-item">Creating the model</a>
</li>
                                    
<li>
    <a href="../../chapter2/2_op_integration/" class="dropdown-item">Integrate the model in OpenPages</a>
</li>
                                    
<li>
    <a href="../../chapter2/3_view_customisation/" class="dropdown-item">Making the AI feature available in OpenPages</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Chapter 3</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../0_index/" class="dropdown-item">Overview</a>
</li>
                                    
<li>
    <a href="../1_modify_op_object/" class="dropdown-item">Modifying an Object in OpenPages</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Set-up and Integrate AI Model</a>
</li>
                                    
<li>
    <a href="../3_bulk_analysis/" class="dropdown-item">Execute AI in Bulk</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Chapter 4</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../chapter4/0_index/" class="dropdown-item">Overview</a>
</li>
                                    
<li>
    <a href="../../chapter4/1_configure_view_input/" class="dropdown-item">Configuring a Custom View as Input for ML Models</a>
</li>
                                    
<li>
    <a href="../../chapter4/2_validate_view_input/" class="dropdown-item">Validate the View Input</a>
</li>
                                    
<li>
    <a href="../../chapter4/3_prompt/" class="dropdown-item">Develop and Deploy Prompt</a>
</li>
                                    
<li>
    <a href="../../chapter4/4_integrate/" class="dropdown-item">Integrate ML Model and Make Available in View</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../1_modify_op_object/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../3_bulk_analysis/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#lab-22-set-up-and-integrate-ai-model" class="nav-link">Lab 2.2: Set-up and Integrate AI Model</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#1-create-and-deploy-the-prompt-template-in-watsonxai" class="nav-link">1. Create and Deploy the Prompt Template in watsonx.ai</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#2-integrating-deployed-ai-model-to-openpages" class="nav-link">2. Integrating Deployed AI Model to OpenPages</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#3-add-the-model-to-control-view" class="nav-link">3. Add the Model to Control View</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#4-test-the-model-in-openpages" class="nav-link">4. Test the Model in OpenPages</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="lab-22-set-up-and-integrate-ai-model">Lab 2.2: Set-up and Integrate AI Model</h1>
<hr />
<h2 id="1-create-and-deploy-the-prompt-template-in-watsonxai">1. Create and Deploy the Prompt Template in watsonx.ai</h2>
<ol>
<li>As per Lab 1.1, create an AI deployment in watsonx.ai for 5W analysis. Use the Control Description as input, and output each of the 5 Ws as well as the Control Rating. Ensure that the Control Rating output aligns with the taxonomy created in Lab 2.1. Here is something to get you started:</li>
</ol>
<pre><code>[INSTRUCTION]

&gt; Define the purpose of the AI and it's task &lt;

Control Description Format:
&gt; Define the input and the definition of each 5W it should ideally contain &lt;

Output you need to give within a single json object:
1. &gt; Provide the instruction to extract the 5Ws &lt;
2. &gt; Provide the instruction to generate the Control Quality &lt; 
4. &gt; Provide the instruction to generate the explanation of the Control Quality &lt;

Generate only a json object, no post script tagging such as [END OF INSTRUCTION].

[FEW-SHOT EXAMPLES]

Example 1:
Control Description:
&quot;All automated and manual alerts must be assessed in a timely manner in line with the Investigations Standard Operating Procedure (SOP) by investigators and adhere to internal tolerances (WHY). The requirements are outlined in the Institutional Investigations SOP and the Investigation Timing, Tolerances &amp; Appetite document. The Investigations team Lead (WHO) monitors the timeliness of alert assessment at least twice weekly (WHEN) via the Transaction Monitoring and Investigations Dashboard. Metrics (WHAT) are discussed at the monthly Finance Oversight Forum prior to being presented at the Global Working Group Forum. Exceptions are escalated to Head of Finance. Email evidence of escalations and metrics reported to the forums are saved in the Finance SharePoint (WHERE).&quot;

Question:
What is the JSON Output with no markup and no backticks for 5W description analysis?

Response (JSON Output):
{
&quot;Who&quot;: &gt; The who &lt;,
&quot;What&quot;: &gt; The what &lt;,
&quot;When&quot;: &gt; The when &lt;,
&quot;Where&quot;: &gt; The where &lt;,
&quot;Why&quot;: &gt; The why &lt;,
&quot;Control Quality&quot;: &gt; The control quality &lt;,
&quot;Control Quality Explain&quot;: &gt; An explanation of why the control quality is the way it is&lt;
}

Example 2:
Control Description:
&quot;Multiple levels of review and challenge of the stress testing assumptions and results, from R&amp;CA team members to Division Head to CEO of the Group and the Bank.&quot;

Question:
What is the JSON Output with no markup and no backticks for 5W description analysis?

Response (JSON Output):
{
&quot;Who&quot;: &gt; The who &lt;,
&quot;What&quot;: &gt; The what &lt;,
&quot;When&quot;: &gt; The when &lt;,
&quot;Where&quot;: &gt; The where &lt;,
&quot;Why&quot;: &gt; The why &lt;,
&quot;Control Quality&quot;: &gt; The control quality &lt;,
&quot;Control Quality Explain&quot;: &gt; An explanation of why the control quality is the way it is&lt;
}

Example 3:
Control Description:
&quot;Why: The control objective is to ensure the adequacy of professional indemnity insurance arrangements for Customer Finance.\nWhat: On an annual basis, Custody and Product Management review the adequacy of the compensation and insurance arrangements for Customer Finance. In assessing the adequacy of the PI insurance cover, the following information is reviewed: \n•\tCustomer Finance’s business activities and financial position \n•\tInformation about the PI insurance cover against the requirements under ASIC Regulatory Guide
RG126\nWho: The review is coordinated by The Office of the Trustee with the input from Product Management. \n&quot; 

Question:
What is the JSON Output with no markup and no backticks for 5W description analysis?

Response (JSON Output):
{
&quot;Who&quot;: &gt; The who &lt;,
&quot;What&quot;: &gt; The what &lt;,
&quot;When&quot;: &gt; The when &lt;,
&quot;Where&quot;: &gt; The where &lt;,
&quot;Why&quot;: &gt; The why &lt;,
&quot;Control Quality&quot;: &gt; The control quality &lt;,
&quot;Control Quality Explain&quot;: &gt; An explanation of why the control quality is the way it is&lt;
}

Example 4:
Control Description:
&quot;[WHO] Prudential Risk CARM, \n[WHAT] as data consumers, provides performs appropriate checks and reviews of input data, including through variance analysis and four-eyes checks (multiple reviews within Prudential Risk CARM) as outlined in the calculation, Monitoring and Reporting procedures \n[WHEN] Every quarter, both before (input data check) and after (variance analysis, four-eyes check) generating dashboard, \n[WHY] To verify the input data and how it is processed by the dashboard, and identify data issues which may require rectification  \n[WHERE] Evidence of the above review and variance analysis is saved in the SharePoint.&quot;

Question:
What is the JSON Output with no markup and no backticks for 5W description analysis?

Response (JSON Output):
{
&quot;Who&quot;: &gt; The who &lt;,
&quot;What&quot;: &gt; The what &lt;,
&quot;When&quot;: &gt; The when &lt;,
&quot;Where&quot;: &gt; The where &lt;,
&quot;Why&quot;: &gt; The why &lt;,
&quot;Control Quality&quot;: &gt; The control quality &lt;,
&quot;Control Quality Explain&quot;: &gt; An explanation of why the control quality is the way it is&lt;
}

Example 5:
Control Description:
&quot;[WHO] Credit Group [WHAT] notify senior management and escalate [WHEN] which have exceeded APS221 prudential limit thresholds of 25%. [WHY] This is to support regulatory reporting obligations and to provide transparency over management and mitigation of material large exposures.[WHERE] Evidence of large exposure escalations are recorded in an appropriate register.&quot;

Question:
What is the JSON Output with no markup and no backticks for 5W description analysis?

Response (JSON Output):
{
&quot;Who&quot;: &gt; The who &lt;,
&quot;What&quot;: &gt; The what &lt;,
&quot;When&quot;: &gt; The when &lt;,
&quot;Where&quot;: &gt; The where &lt;,
&quot;Why&quot;: &gt; The why &lt;,
&quot;Control Quality&quot;: &gt; The control quality &lt;,
&quot;Control Quality Explain&quot;: &gt; An explanation of why the control quality is the way it is&lt;
}

[INPUT]

Control Description:
{control_description}

Question:
What is the JSON Output with no markup and no backticks for 5W description analysis?

Response (JSON Output):
</code></pre>
<hr />
<h2 id="2-integrating-deployed-ai-model-to-openpages">2. Integrating Deployed AI Model to OpenPages</h2>
<ol>
<li>
<p>Once the AI model is deployed in watsonx.ai, it can be integrated into OpenPages. As per Lab 1.2, configure a Custom Machine Learning Model and set up the <strong>Model access</strong> and <strong>Inputs</strong>. 
<img alt="6_model_inputs.png" src="../images/6_model_inputs.png" /></p>
</li>
<li>
<p>For <strong>Outputs</strong>, add outputs for headers for each of the 5Ws (for formatting), as well as the actual output text with the JSONata string that translates the AI model output. Ensure that the Control Rating is set to the target field created in lab 2.1. 
<img alt="7_model_outputs_1.png" src="../images/7_model_outputs_1.png" />
<img alt="8_model_outputs_2.png" src="../images/8_model_outputs_2.png" /></p>
</li>
<li>
<p>Add a suitable dscription and customise the style to your choosing in <strong>Guidance</strong>. Save the model.</p>
</li>
</ol>
<hr />
<h2 id="3-add-the-model-to-control-view">3. Add the Model to Control View</h2>
<ol>
<li>
<p>Navigate to the control object view as per Lab 2.1 to add the AI model we deployed.</p>
</li>
<li>
<p>Rather than add a new AI button, navigate to the <strong>Description</strong> field and add the 5W model to <strong>AI model configuration</strong>. Click Done and publish the view.
<img alt="9_adding_5w_model_to_view.png" src="../images/9_adding_5w_model_to_view.png" /></p>
</li>
</ol>
<hr />
<h2 id="4-test-the-model-in-openpages">4. Test the Model in OpenPages</h2>
<ol>
<li>Find an example control, and run the 5W AI model that appears near the control description. The rating output will populate the <strong>5W Control Rating</strong> field created before.
<img alt="10_testing_5w_model.png" src="../images/10_testing_5w_model.png" /></li>
</ol></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
